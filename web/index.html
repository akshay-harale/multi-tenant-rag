<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Multi-Tenant RAG with Sources</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Multi-Tenant RAG Application with Source-Based Isolation" />
  <link rel="stylesheet" href="/ui/styles.css" />
</head>
<body>
  <div id="app">
    <!-- Breadcrumb Navigation -->
    <div class="breadcrumb" id="breadcrumb"></div>

    <!-- Page 1: Tenant Selection -->
    <div class="page active" id="page-tenants">
      <div class="card">
        <h1>ğŸ¢ Tenant Management</h1>
        <p style="color:#8893a4;margin-bottom:20px;">Select an existing tenant or create a new one to get started.</p>
        
        <div class="form-row">
          <div class="form-group" style="margin:0;">
            <label>Create New Tenant</label>
            <input id="newTenantId" type="text" placeholder="e.g., acme_corp" />
          </div>
          <button id="btnCreateTenant" class="success">Create Tenant</button>
        </div>
      </div>

      <div class="card">
        <h2>Available Tenants</h2>
        <div id="tenantList" class="card-grid"></div>
        <div id="tenantEmpty" class="empty-state" style="display:none;">
          <div class="empty-state-icon">ğŸ“</div>
          <div class="empty-state-title">No Tenants Found</div>
          <p>Create your first tenant to get started</p>
        </div>
      </div>
    </div>

    <!-- Page 2: Source Management -->
    <div class="page" id="page-sources">
      <div class="card">
        <h1>ğŸ“‚ Source Management</h1>
        <p style="color:#8893a4;margin-bottom:20px;">
          Tenant: <span class="badge primary" id="currentTenantDisplay"></span>
        </p>
        
        <div class="form-row">
          <div class="form-group" style="margin:0;">
            <label>Create New Source</label>
            <input id="newSourceName" type="text" placeholder="e.g., product-docs, legal-contracts" />
          </div>
          <button id="btnCreateSource" class="success">Create Source</button>
        </div>
      </div>

      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
          <h2 style="margin:0;">Your Sources</h2>
          <button id="btnProceedWithoutSource" class="secondary small">Skip (Use All Sources)</button>
        </div>
        <div id="sourceList" class="card-grid"></div>
        <div id="sourceEmpty" class="empty-state" style="display:none;">
          <div class="empty-state-icon">ğŸ“¦</div>
          <div class="empty-state-title">No Sources Yet</div>
          <p>Create a source to organize your documents, or skip to use all documents</p>
        </div>
      </div>
    </div>

    <!-- Page 3: Document Upload & Chat -->
    <div class="page" id="page-chat">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <h1>ğŸ’¬ Chat & Document Management</h1>
            <p style="color:#8893a4;margin:8px 0 0 0;">
              Tenant: <span class="badge primary" id="chatTenantDisplay"></span> &nbsp;
              Source: <span class="badge" id="chatSourceDisplay"></span>
            </p>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>ğŸ“¤ Upload Documents</h3>
        <div class="form-row">
          <div class="form-group" style="margin:0;">
            <input id="fileInput" type="file" accept=".pdf,.txt" />
          </div>
          <button id="btnUpload">Upload & Embed</button>
        </div>
        <div class="status-log" id="uploadLog">Ready to upload documents...</div>
      </div>

      <div class="card">
        <h3>ğŸ’¬ Chat with Documents</h3>
        <div class="chat-container">
          <div class="source-selector">
            <h3 style="margin-top:0;">Filter by Sources</h3>
            <div id="sourceFilterList" class="source-list"></div>
          </div>
          <div class="chat-main">
            <div class="chat-box" id="chatBox">
              <div style="text-align:center;color:#8893a4;padding:40px 20px;">
                Start a conversation by typing a message below
              </div>
            </div>
            <div class="chat-input-area">
              <textarea id="chatInput" placeholder="Ask a question about your documents..." rows="3"></textarea>
              <button id="btnSend">Send</button>
            </div>
            <div class="chat-controls">
              <select id="chatTopK">
                <option value="4">Top 4 chunks</option>
                <option value="6" selected>Top 6 chunks</option>
                <option value="8">Top 8 chunks</option>
                <option value="10">Top 10 chunks</option>
              </select>
              <button id="btnNewSession" class="secondary small">New Session</button>
              <button id="btnClearChat" class="danger small">Clear Display</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/ui/app.js"></script>
</body>
</html>
